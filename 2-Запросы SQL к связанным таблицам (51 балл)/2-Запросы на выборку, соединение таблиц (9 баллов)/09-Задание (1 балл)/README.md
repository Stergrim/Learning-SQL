# Задание

**Задание**

Придумайте один или несколько запросов для таблиц `book`, `author`, `genre` и `city`. Проверьте, правильно ли они работают.

При желании можно формулировку запросов  разместить в комментариях. 

Размещенные задания можно использовать для закрепления материала урока.

Оценивайте понравившиеся Вам запросы.

В последнем модуле создан отдельный урок, в котором мы разместим запросы, набравшие наибольшее количество лайков. 

**Логическая схема базы данных:**

<p float="left">
<img src="cx1.jpg" width="400" />
</p>

**Структура и наполнение таблиц:**

Таблица `author`:

| **author_id** | **name_author**  |
|:--------------|:-----------------|
| 1             | Булгаков М.А.    |
| 2             | Достоевский Ф.М. |
| 3             | Есенин С.А.      |
| 4             | Пастернак Б.Л.   |
| 5             | Лермонтов М.Ю.   |

Таблица `genre`:

| **genre_id** | **name_genre** |
|:-------------|:---------------|
| 1            | Роман          |
| 2            | Поэзия         |
| 3            | Приключения    |

Таблица `book`:

| **book_id** | **title**             | **author_id** | **genre_id** | **price**    | **amount** |
|:------------|:----------------------|:--------------|:-------------|:-------------|:-----------|
| 1           | Мастер и Маргарита    | 1             | 1            | 670.99       | 3          |
| 2           | Белая гвардия         | 1             | 1            | 540.50       | 5          |
| 3           | Идиот                 | 2             | 1            | 460.00       | 10         |
| 4           | Братья Карамазовы     | 2             | 1            | 799.01       | 3          |
| 5           | Игрок                 | 2             | 1            | 480.50       | 10         |
| 6           | Стихотворения и поэмы | 3             | 2            | 650.00       | 15         |
| 7           | Черный человек        | 3             | 2            | 570.20       | 6          |
| 8           | Лирика                | 4             | 2            | 518.99       | 2          |

Таблица `city`:

| **city_id** | **name_city**   |
|:------------|:----------------|
| 1           | Москва          |
| 2           | Санкт-Петербург |
| 3           | Владивосток     |

Вывести, сколько книг написано в каждом жанре и сколько экземпляров каждого жанра на складе.

Введите SQL запрос

*Результат:*

```mysql
Query result:
+-------------+--------------+------------+
| name_genre  | COUNT(title) | Экземпляры |
+-------------+--------------+------------+
| Роман       | 5            | 31         |
| Поэзия      | 3            | 23         |
| Приключения | 0            | 0          |
+-------------+--------------+------------+
Affected rows: 3
```

```mysql
SELECT name_genre, COUNT(title), IF(SUM(amount) > 0, SUM(amount), 0) AS Экземпляры
FROM genre AS g LEFT JOIN book AS b ON g.genre_id = b.genre_id
GROUP BY name_genre;
```

Вы получили: 1 балл из 1
